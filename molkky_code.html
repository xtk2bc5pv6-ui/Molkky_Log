<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>MÃ¶lkky Simple Log</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* å…¨ä½“è¨­å®š */
        body { 
            background-color: #1a1a1a; 
            color: #fff; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            touch-action: manipulation; /* ã‚¹ãƒãƒ›ã§ã®æ“ä½œé…å»¶ã‚’é˜²ã */
        }

        /* ãƒ¢ãƒ«ãƒƒã‚¯ã®ã‚¹ã‚­ãƒƒãƒˆãƒ«é¢¨ãƒœã‚¿ãƒ³ */
        .pin-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #d4a373; /* æœ¨ã®è‰² */
            color: #3e2723; /* æ–‡å­—è‰² */
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-center: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.3), inset 0 -4px 0 rgba(0,0,0,0.2);
            transition: transform 0.1s, background-color 0.1s;
        }
        .pin-btn:active {
            transform: scale(0.95);
            background-color: #bc8a5f;
        }

        /* ãƒŸã‚¹ãƒœã‚¿ãƒ³ */
        .miss-btn {
            width: 100%;
            padding: 15px;
            background-color: #ef4444;
            color: white;
            font-weight: bold;
            border-radius: 12px;
            box-shadow: 0 4px 0 #991b1b;
        }
        .miss-btn:active {
            transform: translateY(4px);
            box-shadow: none;
        }
    </style>
</head>
<body class="h-screen flex flex-col max-w-md mx-auto relative">

    <div class="bg-gray-800 p-4 pb-6 rounded-b-3xl shadow-lg z-10">
        <div class="flex justify-between items-center mb-2">
            <div class="flex flex-col">
                <span class="text-xs text-gray-400">PLAYER</span>
                <input type="text" value="Player 1" class="bg-transparent text-xl font-bold text-white w-32 focus:outline-none focus:border-b border-gray-500">
            </div>
            
            <div class="flex flex-col items-end">
                <span class="text-xs text-gray-400">MISS</span>
                <div id="miss-display" class="flex space-x-1 text-2xl h-8">
                    <span class="text-gray-700">â—</span>
                    <span class="text-gray-700">â—</span>
                    <span class="text-gray-700">â—</span>
                </div>
            </div>
        </div>

        <div class="text-center mt-2">
            <div class="text-sm text-gray-400 mb-1">CURRENT SCORE</div>
            <div id="score-display" class="text-7xl font-mono font-bold text-yellow-400 leading-none">0</div>
            <div class="text-sm text-gray-500 mt-2">Target: 50</div>
        </div>
    </div>

    <div class="flex-grow overflow-y-auto p-4 space-y-2" id="log-area">
        <div class="text-center text-xs text-gray-600 mt-4">-- è©¦åˆé–‹å§‹ --</div>
    </div>

    <div class="bg-gray-900 p-4 pb-8 rounded-t-3xl shadow-inner">
        
        <div class="flex justify-center mb-6 space-x-4 text-sm">
            <label class="flex items-center space-x-2">
                <input type="radio" name="mode" value="break" checked class="accent-blue-500">
                <span class="text-gray-400">è¤‡æ•°(æœ¬æ•°)</span>
            </label>
            <label class="flex items-center space-x-2">
                <input type="radio" name="mode" value="snipe" class="accent-green-500">
                <span class="text-gray-400">1æœ¬(ç•ªå·)</span>
            </label>
        </div>

        <div class="flex flex-col items-center gap-3 mb-6">
            <div class="flex gap-4">
                <button class="pin-btn" onclick="addScore(7)">7</button>
                <button class="pin-btn" onclick="addScore(9)">9</button>
                <button class="pin-btn" onclick="addScore(8)">8</button>
            </div>
            <div class="flex gap-4">
                <button class="pin-btn" onclick="addScore(5)">5</button>
                <button class="pin-btn" onclick="addScore(11)">11</button>
                <button class="pin-btn" onclick="addScore(12)">12</button>
                <button class="pin-btn" onclick="addScore(6)">6</button>
            </div>
            <div class="flex gap-4">
                <button class="pin-btn" onclick="addScore(3)">3</button>
                <button class="pin-btn" onclick="addScore(10)">10</button>
                <button class="pin-btn" onclick="addScore(4)">4</button>
            </div>
            <div class="flex gap-4">
                <button class="pin-btn" onclick="addScore(1)">1</button>
                <button class="pin-btn" onclick="addScore(2)">2</button>
            </div>
        </div>

        <div class="grid grid-cols-4 gap-4">
            <button onclick="resetGame()" class="col-span-1 bg-gray-700 text-gray-400 rounded-xl text-xs font-bold">RESET</button>
            <button onclick="addScore(0)" class="col-span-3 miss-btn text-xl">MISS (0)</button>
        </div>
    </div>

    <script>
        // ã‚²ãƒ¼ãƒ ã®çŠ¶æ…‹å¤‰æ•°
        let currentScore = 0;
        let missCount = 0;
        let history = []; // ã€Œæˆ»ã‚‹ã€æ©Ÿèƒ½ç”¨ï¼ˆä»Šå›ã¯ã‚·ãƒ³ãƒ—ãƒ«åŒ–ã®ãŸã‚ãƒ­ã‚°è¡¨ç¤ºã®ã¿ï¼‰

        const scoreEl = document.getElementById('score-display');
        const missEl = document.getElementById('miss-display');
        const logArea = document.getElementById('log-area');

        // ç‚¹æ•°è¿½åŠ å‡¦ç†
        function addScore(points) {
            const isSnipe = document.querySelector('input[name="mode"]:checked').value === 'snipe';
            const previousScore = currentScore;

            // 1. ãƒŸã‚¹åˆ¤å®šã¨å‡¦ç†
            if (points === 0) {
                missCount++;
                logAction(previousScore, 0, "MISS");
                updateMissDisplay();
                
                if (missCount >= 3) {
                    setTimeout(() => alert("å¤±æ ¼ï¼ (3å›é€£ç¶šãƒŸã‚¹)"), 100);
                }
                return; // ç‚¹æ•°è¨ˆç®—ã›ãšçµ‚äº†
            } else {
                // å¾—ç‚¹ã—ãŸå ´åˆã¯ãƒŸã‚¹ã‚«ã‚¦ãƒ³ãƒˆã‚’ãƒªã‚»ãƒƒãƒˆ
                missCount = 0;
                updateMissDisplay();
            }

            // 2. ç‚¹æ•°åŠ ç®—ãƒ«ãƒ¼ãƒ«
            let nextScore = currentScore + points;

            if (nextScore === 50) {
                currentScore = 50;
                scoreEl.innerText = 50;
                scoreEl.classList.add("text-green-400"); // è‰²ã‚’å¤‰ãˆã‚‹
                logAction(previousScore, points, "FINISH!");
                setTimeout(() => alert("ğŸ‰ 50ç‚¹ãƒ”ãƒƒã‚¿ãƒªï¼å‹åˆ©ï¼"), 100);
                return;
            } else if (nextScore > 50) {
                currentScore = 25; // 25ç‚¹ã«æˆ»ã‚‹
                logAction(previousScore, points, "OVER -> 25");
                alert("ã‚ªãƒ¼ãƒãƒ¼ï¼25ç‚¹ã«æˆ»ã‚Šã¾ã™ã€‚");
            } else {
                currentScore = nextScore;
                logAction(previousScore, points, isSnipe ? "Snipe" : "Break");
            }

            // ç”»é¢æ›´æ–°
            scoreEl.innerText = currentScore;
            
            // ãƒ­ã‚°ã‚¨ãƒªã‚¢ã‚’ä¸€ç•ªä¸‹ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
            logArea.scrollTop = logArea.scrollHeight;
        }

        // ãƒ­ã‚°ã‚’è¡¨ç¤ºã«è¿½åŠ 
        function logAction(prev, points, type) {
            const div = document.createElement('div');
            div.className = "flex justify-between text-sm border-b border-gray-800 pb-1";
            
            // è‰²åˆ†ã‘
            let pointColor = points === 0 ? "text-red-400" : "text-green-400";
            
            div.innerHTML = `
                <span class="text-gray-500 w-12">${history.length + 1}æŠ•ç›®</span>
                <span class="${pointColor} font-bold w-12 text-center">${points}pt</span>
                <span class="text-gray-600 text-xs w-20 text-right">${type}</span>
                <span class="text-white font-mono ml-auto">${prev} â†’ ${currentScore}</span>
            `;
            logArea.appendChild(div);
            history.push({ score: currentScore, miss: missCount });
        }

        // ãƒŸã‚¹è¡¨ç¤ºï¼ˆâ—â—â—ï¼‰ã®æ›´æ–°
        function updateMissDisplay() {
            let html = '';
            for (let i = 0; i < 3; i++) {
                if (i < missCount) {
                    html += '<span class="text-red-500">âŒ</span>';
                } else {
                    html += '<span class="text-gray-700">â—</span>';
                }
            }
            missEl.innerHTML = html;
        }

        // ãƒªã‚»ãƒƒãƒˆå‡¦ç†
        function resetGame() {
            if(!confirm("ã‚¹ã‚³ã‚¢ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) return;
            currentScore = 0;
            missCount = 0;
            history = [];
            scoreEl.innerText = 0;
            scoreEl.classList.remove("text-green-400");
            logArea.innerHTML = '<div class="text-center text-xs text-gray-600 mt-4">-- è©¦åˆé–‹å§‹ --</div>';
            updateMissDisplay();
        }
    </script>
</body>
</html>
